# μ¤ν”„λ§μ—μ„μ μ…λ ¥ κ²€μ¦ (Validation)

---

## π”Ή μ…λ ¥ κ²€μ¦μ΄λ€?

μ…λ ¥ κ²€μ¦(Validation)μ€ **ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°›μ€ λ°μ΄ν„°κ°€ μ ν¨ν•μ§€ κ²€μ‚¬ν•λ” κ³Όμ •**μ΄λ‹¤.  
μ¤ν”„λ§μ—μ„λ” νΌ λ°μ΄ν„°, API μ”μ²­, λ°”μΈλ”© κ°μ²΄ λ“±μ„ κ²€μ¦ν•  μ μλ” λ‹¤μ–‘ν• λ°©λ²•μ„ μ κ³µν•λ©°,  
μ΄λ¥Ό ν†µν•΄ **λ°μ΄ν„° λ¬΄κ²°μ„± ν™•λ³΄, λ³΄μ• κ°•ν™”, μμ™Έ λ°©μ§€** λ“±μ΄ κ°€λ¥ν•λ‹¤.

---

## π”Ή κ²€μ¦ λ°©μ‹ λ¶„λ¥

1. **λ…μ‹μ  κ²€μ¦ (μλ™ κ²€μ‚¬)**  
   - μ»¨νΈλ΅¤λ¬μ—μ„ μ§μ ‘ μ΅°κ±΄μ„ κ²€μ‚¬ν•κ³  μ—λ¬ μ²λ¦¬ μν–‰

2. **Bean Validation (ν‘μ¤€ λ°©μ‹)**  
   - `javax.validation` κΈ°λ°μ μ–΄λ…Έν…μ΄μ… μ‚¬μ©
   - `@Valid`, `@NotNull`, `@Size` λ“±μ μ μ•½ μ΅°κ±΄ μ„ μ–Έ

3. **μ¤ν”„λ§ Validator μΈν„°νμ΄μ¤ ν™μ©**  
   - λ³µμ΅ν•κ±°λ‚ μ»¤μ¤ν…€ κ²€μ¦μ΄ ν•„μ”ν• κ²½μ° μ μ©

---

## π”Ή Bean Validationμ μ£Όμ” μ–΄λ…Έν…μ΄μ…

| μ–΄λ…Έν…μ΄μ…         | μ„¤λ…                                      |
|--------------------|-------------------------------------------|
| `@NotNull`         | null κ°’ λ¶ν—                               |
| `@NotEmpty`        | null λλ” λΉ λ¬Έμμ—΄ λ¶ν—                   |
| `@NotBlank`        | null, λΉ λ¬Έμμ—΄, κ³µλ°±λ§ μλ” λ¬Έμμ—΄ λ¶ν—    |
| `@Size(min, max)`  | λ¬Έμμ—΄, μ»¬λ ‰μ… λ“±μ ν¬κΈ° μ μ•½               |
| `@Email`           | μ΄λ©”μΌ ν•μ‹ κ²€μ‚¬                           |
| `@Pattern`         | μ •κ·μ‹ κΈ°λ° κ²€μ¦                           |
| `@Min`, `@Max`     | μ«μ λ²”μ„ μ§€μ •                             |
| `@Positive`        | μ–‘μλ§ ν—μ©                                |
| `@Past`, `@Future` | κ³Όκ±°/λ―Έλ λ‚ μ§ μ—¬λ¶€                        |

---

## π”Ή κ²€μ¦ μ μ© νλ¦„ (Annotation κΈ°λ°)

1. DTOμ— μ μ•½ μ΅°κ±΄ μ–΄λ…Έν…μ΄μ…μ„ μ¶”κ°€  
2. μ»¨νΈλ΅¤λ¬μ—μ„ `@Valid` λλ” `@Validated` μ μ©  
3. `BindingResult` νλΌλ―Έν„°λ¥Ό ν†µν•΄ κ²€μ¦ μ‹¤ν¨ μ—¬λ¶€ ν™•μΈ  
4. μ—λ¬κ°€ μλ‹¤λ©΄ μ‚¬μ©μμ—κ² μ μ ν• μ‘λ‹µ λλ” λ·° λ°ν™

---

## π”Ή `@Valid` vs `@Validated`

| μ–΄λ…Έν…μ΄μ…     | μ„¤λ…                                      |
|----------------|-------------------------------------------|
| `@Valid`       | JSR-303 ν‘μ¤€ κ²€μ¦ (javax.validation)       |
| `@Validated`   | μ¤ν”„λ§ μμ²΄μ κ²€μ¦, κ·Έλ£Ή κ²€μ¦ μ§€μ› κ°€λ¥    |

β€» κ·Έλ£Ή κ²€μ¦μ΄ ν•„μ” μ—†λ” μΌλ°μ μΈ κ²½μ°μ—λ” `@Valid`λ¥Ό μ‚¬μ©ν•΄λ„ λ¬΄λ°©

---

## π”Ή BindingResultλ€?

μ¤ν”„λ§ MVCμ—μ„ `@Valid` λλ” `@Validated`λ΅ κ²€μ¦ μ‹,  
**λ°”λ΅ λ‹¤μ νλΌλ―Έν„°μ— `BindingResult`λ¥Ό μ„ μ–Έν•λ©΄** κ²€μ¦ μ¤λ¥ λ°μƒ μ‹ μμ™Έκ°€ μ•„λ‹ κ²°κ³Ό κ°μ²΄λ΅ λ°ν™λλ‹¤.

μ΄ κ°μ²΄λ” λ‹¤μ μ •λ³΄λ¥Ό ν¬ν•¨ν•¨:

- ν•„λ“λ³„ μ—λ¬ λ©”μ‹μ§€
- μ „μ²΄ μ ν¨μ„± κ²°κ³Ό
- μ‚¬μ©μμ—κ² λ°ν™ν•  μ¤λ¥ μ •λ³΄

---

## π”Ή Validator μΈν„°νμ΄μ¤ κµ¬ν„

λ³µμ΅ν• λ΅μ§μ΄ ν•„μ”ν• κ²½μ°, Springμ `org.springframework.validation.Validator` μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•  μ μλ‹¤.  
μ»¤μ¤ν…€ κ°μ²΄μ— λ€ν•΄ μλ™ κ²€μ¦μ΄ κ°€λ¥ν•λ©°, `supports()` λ° `validate()` λ©”μ„λ“λ¥Ό ν†µν•΄ μ μ© λ²”μ„μ™€ κ²€μ¦ λ΅μ§μ„ μ •μν•λ‹¤.

Controllerμ—μ„λ” `WebDataBinder`λ¥Ό ν†µν•΄ ν•΄λ‹Ή Validatorλ¥Ό λ“±λ΅ν•κ±°λ‚, μ „μ—­ Validator μ„¤μ • κ°€λ¥

---

## π”Ή κ²€μ¦ μ‹¤ν¨ μ²λ¦¬ μ „λµ

- Form κΈ°λ°: λ¨λΈμ— μ—λ¬ λ©”μ‹μ§€λ¥Ό λ‹΄μ•„ λ·°λ΅ λλλ¦Ό
- REST API κΈ°λ°: `@RestControllerAdvice` λλ” `@ExceptionHandler`λ¥Ό ν™μ©ν• JSON μ—λ¬ μ‘λ‹µ μ κ³µ
- κΈ€λ΅λ² λ©”μ‹μ§€ μ²λ¦¬: `message.properties`μ— μ—λ¬ λ©”μ‹μ§€ ν‚¤ μ •μν•μ—¬ κµ­μ ν™” λ€μ‘ κ°€λ¥

---

## β… μ •λ¦¬ μ”μ•½

- μ¤ν”„λ§μ€ Bean Validationμ„ ν†µν•΄ μ–΄λ…Έν…μ΄μ… κΈ°λ° κ²€μ¦ κΈ°λ¥μ„ μ κ³µν•λ©°, λ³µμ΅ν• λ΅μ§μ€ Validator μΈν„°νμ΄μ¤λ΅ ν™•μ¥ κ°€λ¥ν•λ‹¤.
- κ²€μ¦μ€ μ£Όλ΅ DTOμ— μ„ μ–Έλλ©°, μ»¨νΈλ΅¤λ¬μ—μ„ `@Valid` λλ” `@Validated`λ¥Ό ν†µν•΄ ν™μ„±ν™”λλ‹¤.
- κ²€μ¦ μ‹¤ν¨ μ‹ `BindingResult`λ¥Ό ν™μ©ν•λ©΄ μμ™Έ μ—†μ΄ μ μ—°ν• μ¤λ¥ μ²λ¦¬κ°€ κ°€λ¥ν•λ‹¤.
- RESTμ™€ Form κΈ°λ° μ‘λ‹µ λ¨λ‘μ— λ§κ² μ μ—°ν•κ² λ€μ‘ν•  μ μλ” μ„¤κ³„κ°€ μ¤‘μ”ν•λ‹¤.
