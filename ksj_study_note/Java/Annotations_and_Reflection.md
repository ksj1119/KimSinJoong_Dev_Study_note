# 애너테이션과 리플렉션 기초

---

## 🔹 애너테이션이란?

애너테이션은 Java 코드에 **메타데이터(데이터에 대한 데이터)**를 추가하는 수단이다.  
컴파일러, 프레임워크, 런타임 환경이 해당 메타정보를 해석하여 특정 동작을 수행하도록 도와준다.

애너테이션은 클래스, 메서드, 필드, 파라미터, 패키지 등에 부착할 수 있으며, 주로 다음 목적으로 사용된다:

- 코드 문서화
- 컴파일러 힌트 제공 (ex: `@Override`)
- 런타임 동작 제어 (ex: Spring, JPA, DI 등)
- 자동 코드 생성 및 처리 (ex: Lombok)

---

## 🔹 표준 애너테이션 종류

| 애너테이션         | 설명                                          |
|--------------------|-----------------------------------------------|
| `@Override`        | 메서드가 부모 클래스의 메서드를 재정의함을 명시 |
| `@Deprecated`      | 해당 요소의 사용이 권장되지 않음을 나타냄     |
| `@SuppressWarnings`| 컴파일 경고 억제                             |
| `@FunctionalInterface` | 단일 추상 메서드 인터페이스임을 보장      |

---

## 🔹 애너테이션의 동작 시점 분류

| 시점 구분     | 설명                                      |
|---------------|-------------------------------------------|
| 소스(SOURCE)  | 컴파일러 수준에서만 처리되며 클래스 파일에 포함되지 않음 |
| 클래스(CLASS) | 클래스 파일에는 포함되나, 런타임에는 사용 불가          |
| 런타임(RUNTIME)| 실행 중 리플렉션을 통해 조회 가능                   |

런타임 동작 제어를 위해서는 반드시 `@Retention(RetentionPolicy.RUNTIME)` 설정이 필요하다.

---

## 🔹 사용자 정의 애너테이션 구성 요소

사용자 정의 애너테이션을 작성할 때는 다음 요소들을 포함하여 구성한다:

- `@Target`: 애너테이션이 적용될 수 있는 대상 (예: TYPE, METHOD, FIELD 등)
- `@Retention`: 애너테이션의 유지 정책 (SOURCE, CLASS, RUNTIME)
- `@Documented`: javadoc 포함 여부
- `@Inherited`: 상속 여부 (부모 클래스의 애너테이션이 자식에게 전달되는지)

이러한 메타 애너테이션은 `java.lang.annotation` 패키지에 포함되어 있다.

---

## 🔹 리플렉션이란?

리플렉션(Reflection)은 실행 중 클래스, 메서드, 필드 등의 정보를 동적으로 탐색하고 접근할 수 있는 기능이다.  
Java의 리플렉션은 `java.lang.reflect` 패키지를 통해 제공되며, 동적 프록시, 의존성 주입, ORM, 테스트 프레임워크 등에서 핵심 기술로 사용된다.

---

## 🔹 리플렉션의 주요 활용 사례

| 활용 예시           | 설명                                      |
|----------------------|-------------------------------------------|
| 프레임워크 내부 구현 | Spring, Hibernate 등에서 객체 동적 주입 및 매핑 처리 |
| 테스트 자동화        | JUnit 등에서 테스트 메서드 자동 탐색 실행         |
| 런타임 분석 도구     | 클래스 구조 분석, 로그 추적, 프로파일링 등        |
| 어노테이션 기반 처리 | 커스텀 애너테이션을 읽고 자동 설정 구성          |

---

## 🔹 리플렉션 사용 시 주의사항

- **성능 저하**: 일반적인 직접 호출 대비 속도가 느리며, 대량 사용 시 오버헤드 발생
- **접근 제어 우회 위험**: private 필드/메서드 접근이 가능하므로 보안 문제가 생길 수 있음
- **런타임 오류 가능성**: 컴파일 타임 검증이 불가능하므로 철저한 예외 처리 필요

---

## ✅ 정리 요약

- 애너테이션은 코드에 의미 있는 메타데이터를 부착하여 컴파일러 또는 런타임 동작을 제어할 수 있는 수단이다.
- 표준 애너테이션 외에도 개발자가 정의한 커스텀 애너테이션을 사용하면 선언적 설정이 가능해진다.
- 리플렉션은 클래스 구조를 동적으로 제어하고 분석할 수 있는 강력한 도구이지만, 성능과 안정성 측면에서 주의가 필요하다.
- 애너테이션과 리플렉션은 함께 사용되며, 현대 Java 기반 프레임워크의 핵심 메커니즘을 구성한다.
